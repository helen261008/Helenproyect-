<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pizzería Online - Pedidos a Domicilio</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <!-- Agregar Font Awesome para los iconos -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <style>
        /* [Todos los estilos CSS permanecen iguales] */
        /* ... (todo el CSS que ya tenías) ... */
    </style>
</head>
<body>
    <!-- Back to Home Button -->
    <div class="back-to-home" id="back-to-home-btn">
        <i class="fas fa-home"></i>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <a href="#" class="logo">
                <img src="https://via.placeholder.com/50x50/FF6B6B/FFFFFF?text=PZ" alt="Pizzería Online Logo">
                Pizzería Online
            </a>
            <ul class="nav-links">
                <li><a href="#" class="nav-link" data-section="home">Inicio</a></li>
                <li><a href="#" class="nav-link" data-section="menu">Menú</a></li>
                <li><a href="#" class="nav-link" data-section="offers">Ofertas</a></li>
                <li><a href="#" class="nav-link" data-section="contact">Contacto</a></li>
                <li>
                    <div class="cart-icon" id="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </div>
                </li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home-section">
        <div class="hero-content">
            <h1>Las mejores pizzas de la ciudad</h1>
            <p>Disfruta de nuestras deliciosas pizzas recién horneadas con ingredientes frescos</p>
            <a href="#" class="btn" id="start-order-btn">Hacer Pedido</a>
            <a href="#" class="btn btn-outline">Ver Menú</a>
        </div>
    </section>

    <!-- Order Steps (visible solo durante el pedido) -->
    <div class="container" id="order-steps-container" style="display: none;">
        <div class="order-steps">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-title">Seleccionar Pizza</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-title">Personalizar</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-title">Entrega</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-title">Pago</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-title">Confirmación</div>
            </div>
        </div>
    </div>

    <!-- Order Sections (visible solo durante el pedido) -->
    <div class="container" id="order-sections-container" style="display: none;">
        <!-- Pizza Selection Section -->
        <section class="order-section active" id="pizza-selection">
            <h2 class="section-title">Elige tu pizza favorita</h2>
            <div class="pizza-grid" id="pizza-grid">
                <!-- Las pizzas se cargarán dinámicamente aquí -->
            </div>
            <div class="text-center">
                <button class="btn" id="continue-to-customize">Continuar</button>
            </div>
        </section>

        <!-- Customize Pizza Section -->
        <section class="order-section" id="customize-pizza">
            <h2 class="section-title">Personaliza tu pizza</h2>
            <div class="pizza-preview">
                <!-- Vista previa de la pizza seleccionada -->
            </div>
            <div class="size-options">
                <!-- Opciones de tamaño -->
            </div>
            <div class="crust-options">
                <!-- Opciones de masa -->
            </div>
            <div class="toppings-section">
                <!-- Ingredientes adicionales -->
            </div>
            <div class="text-center">
                <button class="btn" id="back-to-selection">Atrás</button>
                <button class="btn" id="continue-to-delivery">Continuar</button>
            </div>
        </section>

        <!-- Delivery Section -->
        <section class="order-section" id="delivery-section">
            <h2 class="section-title">Información de Entrega</h2>
            <div class="delivery-options">
                <!-- Opciones de entrega o recogida -->
            </div>
            <div class="delivery-form">
                <!-- Formulario de dirección -->
            </div>
            <div class="text-center">
                <button class="btn" id="back-to-customize">Atrás</button>
                <button class="btn" id="continue-to-payment">Continuar</button>
            </div>
        </section>

        <!-- Payment Section -->
        <section class="order-section" id="payment-section">
            <h2 class="section-title">Método de Pago</h2>
            <div class="payment-methods">
                <!-- Opciones de pago -->
            </div>
            <div class="text-center">
                <button class="btn" id="back-to-delivery">Atrás</button>
                <button class="btn" id="complete-order">Completar Pedido</button>
            </div>
        </section>

        <!-- Confirmation Section -->
        <section class="order-section" id="confirmation-section">
            <div class="confirmation-message">
                <div class="confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="confirmation-title">¡Pedido Confirmado!</h2>
                <p class="confirmation-text">Gracias por tu pedido. Estamos preparando tu pizza.</p>
                <div class="order-details" id="confirmation-details">
                    <!-- Detalles del pedido -->
                </div>
                <button class="btn" id="new-order-btn">Hacer otro pedido</button>
                <button class="btn btn-outline" id="track-order-btn">Seguir Pedido</button>
                <button class="btn btn-outline" id="download-ticket-btn">Descargar Ticket</button>
            </div>
        </section>
    </div>

    <!-- Menu Section -->
    <section class="container" id="menu-section" style="display: none;">
        <h2 class="section-title">Nuestro Menú</h2>
        <div class="menu-nav">
            <button class="menu-nav-btn active" data-category="pizzas">Pizzas</button>
            <button class="menu-nav-btn" data-category="beverages">Bebidas</button>
            <button class="menu-nav-btn" data-category="desserts">Postres</button>
            <button class="menu-nav-btn" data-category="sides">Acompañamientos</button>
        </div>
        <div class="menu-section active" id="pizzas-menu">
            <!-- Pizzas del menú -->
        </div>
        <div class="menu-section" id="beverages-menu">
            <!-- Bebidas del menú -->
        </div>
        <div class="menu-section" id="desserts-menu">
            <!-- Postres del menú -->
        </div>
        <div class="menu-section" id="sides-menu">
            <!-- Acompañamientos del menú -->
        </div>
    </section>

    <!-- Offers Section -->
    <section class="container" id="offers-section" style="display: none;">
        <h2 class="section-title">Ofertas Especiales</h2>
        <!-- Ofertas especiales -->
    </section>

    <!-- Contact Section -->
    <section class="container" id="contact-section" style="display: none;">
        <h2 class="section-title">Contacto</h2>
        <!-- Información de contacto -->
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container footer-container">
            <div class="footer-column">
                <h3>Pizzería Online</h3>
                <p>Las mejores pizzas entregadas en tu puerta.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                </div>
            </div>
            <div class="footer-column">
                <h3>Enlaces</h3>
                <ul class="footer-links">
                    <li><a href="#">Inicio</a></li>
                    <li><a href="#">Menú</a></li>
                    <li><a href="#">Ofertas</a></li>
                    <li><a href="#">Contacto</a></li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Contacto</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt"></i> Calle Principal 123</li>
                    <li><i class="fas fa-phone"></i> +123 456 7890</li>
                    <li><i class="fas fa-envelope"></i> info@pizzeriaonline.com</li>
                </ul>
            </div>
            <div class="footer-column">
                <h3>Horario</h3>
                <ul class="footer-links">
                    <li>Lunes-Viernes: 11:00 - 23:00</li>
                    <li>Sábado-Domingo: 12:00 - 00:00</li>
                </ul>
            </div>
        </div>
        <div class="copyright">
            <p>&copy; 2023 Pizzería Online. Todos los derechos reservados.</p>
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar">
        <div class="cart-header">
            <h3 class="cart-title">Tu Carrito</h3>
            <div class="cart-close"><i class="fas fa-times"></i></div>
        </div>
        <div class="cart-items">
            <!-- Los items del carrito se agregarán aquí dinámicamente -->
            <div class="cart-empty">
                <div class="cart-empty-icon"><i class="fas fa-shopping-cart"></i></div>
                <p>Tu carrito está vacío</p>
            </div>
        </div>
        <div class="cart-summary">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total-amount">$0.00</span>
            </div>
            <button class="btn" id="checkout-btn" disabled>Finalizar Compra</button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay"></div>

    <!-- Track Order Button -->
    <div class="track-order-btn">
        <div class="track-order-icon"><i class="fas fa-map-marker-alt"></i></div>
    </div>

    <script>
        // Inicializar EmailJS
        (function() {
            emailjs.init('I7oEhEpXP4jX3imk-');
        })();

        // Variables globales
        let cart = [];
        let currentPizza = null;
        let orderDetails = {};
        let currentStep = 1;
        let currentSection = 'home';

        // DOM Elements
        const startOrderBtn = document.getElementById('start-order-btn');
        const continueToCustomizeBtn = document.getElementById('continue-to-customize');
        const continueToDeliveryBtn = document.getElementById('continue-to-delivery');
        const continueToPaymentBtn = document.getElementById('continue-to-payment');
        const completeOrderBtn = document.getElementById('complete-order');
        const backToSelectionBtn = document.getElementById('back-to-selection');
        const backToCustomizeBtn = document.getElementById('back-to-customize');
        const backToDeliveryBtn = document.getElementById('back-to-delivery');
        const cartIcon = document.getElementById('cart-icon');
        const cartCount = document.querySelector('.cart-count');
        const cartSidebar = document.querySelector('.cart-sidebar');
        const cartClose = document.querySelector('.cart-close');
        const overlay = document.querySelector('.overlay');
        const checkoutBtn = document.getElementById('checkout-btn');
        const cartItemsContainer = document.querySelector('.cart-items');
        const cartTotalAmount = document.getElementById('cart-total-amount');
        const orderStepsContainer = document.getElementById('order-steps-container');
        const orderSectionsContainer = document.getElementById('order-sections-container');
        const pizzaGrid = document.getElementById('pizza-grid');
        const homeSection = document.getElementById('home-section');
        const menuSection = document.getElementById('menu-section');
        const offersSection = document.getElementById('offers-section');
        const contactSection = document.getElementById('contact-section');
        const navLinks = document.querySelectorAll('.nav-link');
        const menuNavBtns = document.querySelectorAll('.menu-nav-btn');
        const menuSections = document.querySelectorAll('.menu-section');
        const backToHomeBtn = document.getElementById('back-to-home-btn');

        // Datos de ejemplo para las pizzas
        const pizzas = [
            {
                id: 1,
                name: "Margarita",
                description: "Salsa de tomate, mozzarella y albahaca fresca.",
                price: 8.99,
                image: "https://images.unsplash.com/photo-1574071318508-1cdbab80d002?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            {
                id: 2,
                name: "Pepperoni",
                description: "Salsa de tomate, mozzarella y pepperoni.",
                price: 9.99,
                image: "https://images.unsplash.com/photo-1588315029754-2dd089d39a1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            {
                id: 3,
                name: "Hawaiana",
                description: "Salsa de tomate, mozzarella, jamón y piña.",
                price: 10.99,
                image: "https://images.unsplash.com/photo-1552539618-7eec9b4d1796?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            },
            {
                id: 4,
                name: "Vegetariana",
                description: "Salsa de tomate, mozzarella y variedad de vegetales frescos.",
                price: 9.99,
                image: "https://images.unsplash.com/photo-1595854341625-f33ee10dbf94?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80"
            }
        ];

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadPizzasForOrder();
            setupEventListeners();
        });

        function setupEventListeners() {
            // Navegación principal
            navLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const section = this.getAttribute('data-section');
                    showMainSection(section);
                });
            });

            // Navegación del menú
            menuNavBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const category = this.getAttribute('data-category');
                    showMenuCategory(category);
                });
            });

            // Carrito
            cartIcon.addEventListener('click', toggleCart);
            cartClose.addEventListener('click', toggleCart);
            overlay.addEventListener('click', toggleCart);

            // Proceso de pedido
            startOrderBtn.addEventListener('click', startOrderProcess);
            backToHomeBtn.addEventListener('click', () => showMainSection('home'));
        }

        function showMainSection(section) {
            currentSection = section;
            
            // Ocultar todas las secciones
            homeSection.style.display = 'none';
            menuSection.style.display = 'none';
            offersSection.style.display = 'none';
            contactSection.style.display = 'none';
            orderStepsContainer.style.display = 'none';
            orderSectionsContainer.style.display = 'none';
            
            // Mostrar la sección seleccionada
            if (section === 'home') {
                homeSection.style.display = 'block';
            } else if (section === 'menu') {
                menuSection.style.display = 'block';
            } else if (section === 'offers') {
                offersSection.style.display = 'block';
            } else if (section === 'contact') {
                contactSection.style.display = 'block';
            }
        }

        function showMenuCategory(category) {
            // Remover active de todos los botones
            menuNavBtns.forEach(btn => btn.classList.remove('active'));
            
            // Agregar active al botón seleccionado
            document.querySelector(`.menu-nav-btn[data-category="${category}"]`).classList.add('active');
            
            // Ocultar todas las secciones del menú
            menuSections.forEach(section => section.classList.remove('active'));
            
            // Mostrar la sección seleccionada
            document.getElementById(`${category}-menu`).classList.add('active');
        }

        function loadPizzasForOrder() {
            pizzaGrid.innerHTML = '';
            
            pizzas.forEach(pizza => {
                const pizzaCard = document.createElement('div');
                pizzaCard.className = 'pizza-card';
                pizzaCard.innerHTML = `
                    <div class="pizza-image" style="background-image: url('${pizza.image}')"></div>
                    <div class="pizza-info">
                        <h3 class="pizza-name">${pizza.name}</h3>
                        <p class="pizza-description">${pizza.description}</p>
                        <div class="pizza-footer">
                            <span class="pizza-price">$${pizza.price.toFixed(2)}</span>
                            <button class="btn-add" data-id="${pizza.id}">Añadir</button>
                        </div>
                    </div>
                `;
                
                pizzaGrid.appendChild(pizzaCard);
            });
            
            // Agregar event listeners a los botones "Añadir"
            document.querySelectorAll('.btn-add').forEach(btn => {
                btn.addEventListener('click', function() {
                    const pizzaId = parseInt(this.getAttribute('data-id'));
                    addToCart(pizzaId);
                });
            });
        }

        function addToCart(pizzaId) {
            const pizza = pizzas.find(p => p.id === pizzaId);
            
            if (pizza) {
                // Verificar si la pizza ya está en el carrito
                const existingItem = cart.find(item => item.id === pizza.id);
                
                if (existingItem) {
                    existingItem.quantity += 1;
                } else {
                    cart.push({
                        ...pizza,
                        quantity: 1
                    });
                }
                
                updateCart();
            }
        }

        function updateCart() {
            // Actualizar contador del carrito
            const totalItems = cart.reduce((sum, item) => sum + item.quantity, 0);
            cartCount.textContent = totalItems;
            
            // Actualizar sidebar del carrito
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon"><i class="fas fa-shopping-cart"></i></div>
                        <p>Tu carrito está vacío</p>
                    </div>
                `;
                checkoutBtn.disabled = true;
            } else {
                cartItemsContainer.innerHTML = '';
                
                cart.forEach(item => {
                    const cartItem = document.createElement('div');
                    cartItem.className = 'cart-item';
                    cartItem.innerHTML = `
                        <div class="cart-item-image" style="background-image: url('${item.image}')"></div>
                        <div class="cart-item-details">
                            <h4 class="cart-item-name">${item.name}</h4>
                            <p class="cart-item-options">Cantidad: ${item.quantity}</p>
                            <p class="cart-item-price">$${(item.price * item.quantity).toFixed(2)}</p>
                            <span class="cart-item-remove" data-id="${item.id}">Eliminar</span>
                        </div>
                    `;
                    
                    cartItemsContainer.appendChild(cartItem);
                });
                
                // Calcular total
                const total = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
                cartTotalAmount.textContent = `$${total.toFixed(2)}`;
                checkoutBtn.disabled = false;
            }
            
            // Agregar event listeners a los botones de eliminar
            document.querySelectorAll('.cart-item-remove').forEach(btn => {
                btn.addEventListener('click', function() {
                    const pizzaId = parseInt(this.getAttribute('data-id'));
                    removeFromCart(pizzaId);
                });
            });
        }

        function removeFromCart(pizzaId) {
            cart = cart.filter(item => item.id !== pizzaId);
            updateCart();
        }

        function toggleCart() {
            cartSidebar.classList.toggle('active');
            overlay.classList.toggle('active');
            document.body.classList.toggle('no-scroll');
        }

        function startOrderProcess(e) {
            e.preventDefault();
            currentStep = 1;
            updateSteps();
            
            // Ocultar secciones principales
            homeSection.style.display = 'none';
            menuSection.style.display = 'none';
            offersSection.style.display = 'none';
            contactSection.style.display = 'none';
            
            // Mostrar pasos y secciones del pedido
            orderStepsContainer.style.display = 'block';
            orderSectionsContainer.style.display = 'block';
            
            // Mostrar la primera sección
            document.querySelectorAll('.order-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('pizza-selection').classList.add('active');
        }

        function updateSteps() {
            steps.forEach(step => {
                const stepNumber = parseInt(step.getAttribute('data-step'));
                
                step.classList.remove('active');
                if (stepNumber <= currentStep) {
                    step.classList.add('active');
                }
            });
        }
    </script>
</body>
</html>
