<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sabores del Sol - Pizzería Digital</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
<link rel="stylesheet" href="pata.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container header-container">
            <a href="#" class="logo">
                <img src="https://via.placeholder.com/50x50" alt="Sabores del Sol Logo">
                Sabores del Sol
            </a>
            <ul class="nav-links">
                <li><a href="#" class="nav-home"><i class="fas fa-home"></i> Inicio</a></li>
                <li><a href="#menu-section" class="nav-menu"><i class="fas fa-utensils"></i> Menú</a></li>
                <li><a href="#special-offer" class="nav-offers"><i class="fas fa-tag"></i> Ofertas</a></li>
                <li><a href="#footer" class="nav-contact"><i class="fas fa-phone"></i> Contacto</a></li>
                <li>
                    <div class="cart-icon" id="cart-icon">
                        <i class="fas fa-shopping-cart"></i>
                        <span class="cart-count">0</span>
                    </div>
                </li>
            </ul>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container hero-content">
            <h1>¡Sabores del Sol en tu Casa!</h1>
            <p>Las pizzas más deliciosas entregadas directamente a tu puerta</p>
            <a href="#menu-section" class="btn" id="start-order-btn">Ordenar Ahora</a>
            <a href="#special-offer" class="btn btn-outline">Ver Ofertas</a>
        </div>
    </section>

    <!-- Special Offer -->
    <div class="container" id="special-offer">
        <div class="special-offer">
            <i class="fas fa-gift"></i>
            <div class="special-offer-text">
                <div class="special-offer-title">¡OFERTA ESPECIAL DEL DÍA!</div>
                <div>2 pizzas medianas + 2 bebidas por solo $24.99</div>
            </div>
            <button class="btn" style="background-color: white; color: var(--dark);" id="apply-offer">Aplicar</button>
        </div>
    </div>

    <!-- Order Steps -->
    <div class="container">
        <div class="order-steps">
            <div class="step active" data-step="1">
                <div class="step-number">1</div>
                <div class="step-title">Elige tu menú</div>
            </div>
            <div class="step" data-step="2">
                <div class="step-number">2</div>
                <div class="step-title">Personaliza</div>
            </div>
            <div class="step" data-step="3">
                <div class="step-number">3</div>
                <div class="step-title">Datos de entrega</div>
            </div>
            <div class="step" data-step="4">
                <div class="step-number">4</div>
                <div class="step-title">Pago</div>
            </div>
            <div class="step" data-step="5">
                <div class="step-number">5</div>
                <div class="step-title">Confirmación</div>
            </div>
        </div>
    </div>

    <!-- Order Sections -->
    <div class="container">
        <!-- Menu Selection Section -->
        <section id="menu-section" class="order-section active">
            <h2 class="section-title">Nuestro Menú</h2>
            
            <div class="menu-tabs">
                <div class="menu-tab active" data-tab="pizzas">Pizzas</div>
                <div class="menu-tab" data-tab="bebidas">Bebidas</div>
                <div class="menu-tab" data-tab="postres">Postres</div>
            </div>
            
            <!-- Pizzas -->
            <div id="pizzas-tab" class="menu-content active">
                <div class="product-grid">
                    <!-- Pizza 1 -->
                    <div class="product-card" data-product-id="1" data-product-name="Pepperoni Clásica" data-product-price="12.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1588315029754-2dd089d39a1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Pepperoni Clásica</h3>
                            <p class="product-description">Doble pepperoni y queso mozzarella fundido sobre nuestra salsa especial</p>
                            <div class="product-footer">
                                <span class="product-price">$12.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 2 -->
                    <div class="product-card" data-product-id="2" data-product-name="Hawaiana Gold" data-product-price="14.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Hawaiana Gold</h3>
                            <p class="product-description">Jamón premium, piña caramelizada y queso mozzarella</p>
                            <div class="product-footer">
                                <span class="product-price">$14.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 3 -->
                    <div class="product-card" data-product-id="3" data-product-name="Mexicana Picante" data-product-price="15.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1595854341625-f33ee10dbf94?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Mexicana Picante</h3>
                            <p class="product-description">Carne molida, jalapeños, pimientos, cebolla y nuestra salsa picante</p>
                            <div class="product-footer">
                                <span class="product-price">$15.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 4 -->
                    <div class="product-card" data-product-id="4" data-product-name="Vegetariana Fresca" data-product-price="13.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1571066811602-716837d681de?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Vegetariana Fresca</h3>
                            <p class="product-description">Champiñones, pimientos, cebolla, aceitunas y tomate fresco</p>
                            <div class="product-footer">
                                <span class="product-price">$13.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 5 -->
                    <div class="product-card" data-product-id="5" data-product-name="4 Quesos Premium" data-product-price="16.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1565299507177-b0ac66763828?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">4 Quesos Premium</h3>
                            <p class="product-description">Mezcla de mozzarella, gorgonzola, parmesano y fontina</p>
                            <div class="product-footer">
                                <span class="product-price">$16.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 6 -->
                    <div class="product-card" data-product-id="6" data-product-name="Barbacoa Especial" data-product-price="17.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1565299624946-b28f40a0ae38?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Barbacoa Especial</h3>
                            <p class="product-description">Carne de res desmenuzada, salsa barbacoa y cebolla caramelizada</p>
                            <div class="product-footer">
                                <span class="product-price">$17.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 7 -->
                    <div class="product-card" data-product-id="7" data-product-name="Tropical Deluxe" data-product-price="15.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1541745537411-b8046dc6d66c?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Tropical Deluxe</h3>
                            <p class="product-description">Jamón, pepperoni, champiñones, pimientos y piña</p>
                            <div class="product-footer">
                                <span class="product-price">$15.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pizza 8 -->
                    <div class="product-card" data-product-id="8" data-product-name="Suprema Italiana" data-product-price="18.99" data-product-type="pizza">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1544982503-9f984c14501a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Suprema Italiana</h3>
                            <p class="product-description">Pepperoni, salchicha italiana, champiñones, aceitunas y pimientos</p>
                            <div class="product-footer">
                                <span class="product-price">$18.99</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Bebidas -->
            <div id="bebidas-tab" class="menu-content">
                <div class="product-grid">
                    <!-- Bebida 1 -->
                    <div class="product-card" data-product-id="b1" data-product-name="Refresco de Cola" data-product-price="2.50" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Refresco de Cola</h3>
                            <p class="product-description">Refresco de cola 500ml, refrescante y burbujeante</p>
                            <div class="product-footer">
                                <span class="product-price">$2.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bebida 2 -->
                    <div class="product-card" data-product-id="b2" data-product-name="Limonada Natural" data-product-price="3.00" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1559181567-c3190ca9959b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Limonada Natural</h3>
                            <p class="product-description">Limonada fresca con hierbabuena 500ml</p>
                            <div class="product-footer">
                                <span class="product-price">$3.00</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bebida 3 -->
                    <div class="product-card" data-product-id="b3" data-product-name="Agua Mineral" data-product-price="1.50" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1567337710282-a8a1ed551b3b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Agua Mineral</h3>
                            <p class="product-description">Agua mineral natural 500ml</p>
                            <div class="product-footer">
                                <span class="product-price">$1.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bebida 4 -->
                    <div class="product-card" data-product-id="b4" data-product-name="Jugo de Naranja" data-product-price="3.50" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1612230629561-a3315c6d279a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Jugo de Naranja</h3>
                            <p class="product-description">Jugo natural de naranja recién exprimido 500ml</p>
                            <div class="product-footer">
                                <span class="product-price">$3.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bebida 5 -->
                    <div class="product-card" data-product-id="b5" data-product-name="Cerveza Artesanal" data-product-price="4.50" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1589010588553-46e8e7c21788?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Cerveza Artesanal</h3>
                            <p class="product-description">Cerveza rubia artesanal 330ml</p>
                            <div class="product-footer">
                                <span class="product-price">$4.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Bebida 6 -->
                    <div class="product-card" data-product-id="b6" data-product-name="Té Helado" data-product-price="2.75" data-product-type="bebida">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1558160074-4d7d8bdf4256?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Té Helado</h3>
                            <p class="product-description">Té negro helado con limón 500ml</p>
                            <div class="product-footer">
                                <span class="product-price">$2.75</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Postres -->
            <div id="postres-tab" class="menu-content">
                <div class="product-grid">
                    <!-- Postre 1 -->
                    <div class="product-card" data-product-id="p1" data-product-name="Brownie de Chocolate" data-product-price="4.50" data-product-type="postre">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1564355808539-22fda35bed7e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Brownie de Chocolate</h3>
                            <p class="product-description">Brownie casero con nueces y salsa de chocolate</p>
                            <div class="product-footer">
                                <span class="product-price">$4.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Postre 2 -->
                    <div class="product-card" data-product-id="p2" data-product-name="Cheesecake de Fresa" data-product-price="5.00" data-product-type="postre">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1571115177098-24ec42ed204d?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Cheesecake de Fresa</h3>
                            <p class="product-description">Delicioso cheesecake con salsa de fresa natural</p>
                            <div class="product-footer">
                                <span class="product-price">$5.00</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Postre 3 -->
                    <div class="product-card" data-product-id="p3" data-product-name="Helado de Vainilla" data-product-price="3.75" data-product-type="postre">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1560008581-09826d1de69e?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Helado de Vainilla</h3>
                            <p class="product-description">Helado artesanal de vainilla con toppings</p>
                            <div class="product-footer">
                                <span class="product-price">$3.75</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Postre 4 -->
                    <div class="product-card" data-product-id="p4" data-product-name="Tiramisú Clásico" data-product-price="5.50" data-product-type="postre">
                        <div class="product-image" style="background-image: url('https://images.unsplash.com/photo-1535920527002-b35e96722eb9?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');"></div>
                        <div class="product-info">
                            <h3 class="product-name">Tiramisú Clásico</h3>
                            <p class="product-description">Postre italiano con café, mascarpone y cacao</p>
                            <div class="product-footer">
                                <span class="product-price">$5.50</span>
                                <button class="btn-add">Agregar</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="text-center" style="margin-top: 40px;">
                <button class="btn" id="continue-to-customize" style="padding: 15px 40px;">Continuar a Personalización</button>
            </div>
        </section>

        <!-- Customize Pizza Section -->
        <section id="customize-pizza" class="order-section">
            <h2 class="section-title">Personaliza tu Pizza</h2>
            
            <div class="order-summary">
                <h3 class="summary-title"><i class="fas fa-receipt"></i> Resumen de tu Pedido</h3>
                <div id="order-summary-items">
                    <!-- Aquí se agregarán los items dinámicamente -->
                </div>
                <div class="summary-total">
                    <span>Total:</span>
                    <span id="order-summary-total">$0.00</span>
                </div>
            </div>
            
            <div id="customize-options">
                <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">Selecciona tamaño y masa</h3>
                <div class="size-options">
                    <div class="size-option">
                        <input type="radio" id="size-small" name="size" class="size-radio" value="small" data-price="0" checked>
                        <label for="size-small" class="size-label">
                            <span class="size-name">Pequeña</span>
                            <span class="size-price">25cm (4 porciones)</span>
                        </label>
                    </div>
                    <div class="size-option">
                        <input type="radio" id="size-medium" name="size" class="size-radio" value="medium" data-price="3">
                        <label for="size-medium" class="size-label">
                            <span class="size-name">Mediana</span>
                            <span class="size-price">30cm (+$3.00) (6 porciones)</span>
                        </label>
                    </div>
                    <div class="size-option">
                        <input type="radio" id="size-large" name="size" class="size-radio" value="large" data-price="5">
                        <label for="size-large" class="size-label">
                            <span class="size-name">Grande</span>
                            <span class="size-price">35cm (+$5.00) (8 porciones)</span>
                        </label>
                    </div>
                    <div class="size-option">
                        <input type="radio" id="size-extra-large" name="size" class="size-radio" value="extra-large" data-price="8">
                        <label for="size-extra-large" class="size-label">
                            <span class="size-name">Extra Grande</span>
                            <span class="size-price">40cm (+$8.00) (10 porciones)</span>
                        </label>
                    </div>
                </div>
                
                <div class="crust-options" style="margin-top: 30px;">
                    <div class="crust-option">
                        <input type="radio" id="crust-thin" name="crust" class="crust-radio" value="thin" data-price="0" checked>
                        <label for="crust-thin" class="crust-label">
                            <span class="crust-name">Delgada</span>
                            <span class="crust-price">Masa tradicional italiana</span>
                        </label>
                    </div>
                    <div class="crust-option">
                        <input type="radio" id="crust-thick" name="crust" class="crust-radio" value="thick" data-price="2">
                        <label for="crust-thick" class="crust-label">
                            <span class="crust-name">Gruesa</span>
                            <span class="crust-price">Masa esponjosa (+$2.00)</span>
                        </label>
                    </div>
                    <div class="crust-option">
                        <input type="radio" id="crust-cheese" name="crust" class="crust-radio" value="cheese" data-price="3">
                        <label for="crust-cheese" class="crust-label">
                            <span class="crust-name">Queso</span>
                            <span class="crust-price">Borde relleno de queso (+$3.00)</span>
                        </label>
                    </div>
                    <div class="crust-option">
                        <input type="radio" id="crust-garlic" name="crust" class="crust-radio" value="garlic" data-price="2.5">
                        <label for="crust-garlic" class="crust-label">
                            <span class="crust-name">Ajo</span>
                            <span class="crust-price">Borde de ajo (+$2.50)</span>
                        </label>
                    </div>
                </div>
                
                <div class="toppings-section" style="margin-top: 40px;">
                    <h3 class="toppings-title">Ingredientes Extra ($1.50 c/u)</h3>
                    <div class="toppings-grid">
                        <div class="topping-item">
                            <input type="checkbox" id="topping-pepperoni" class="topping-checkbox" value="Pepperoni" data-price="1.5">
                            <label for="topping-pepperoni">Pepperoni</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-jamon" class="topping-checkbox" value="Jamón" data-price="1.5">
                            <label for="topping-jamon">Jamón</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-champinones" class="topping-checkbox" value="Champiñones" data-price="1.5">
                            <label for="topping-champinones">Champiñones</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-pina" class="topping-checkbox" value="Piña" data-price="1.5">
                            <label for="topping-pina">Piña</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-cebolla" class="topping-checkbox" value="Cebolla" data-price="1.5">
                            <label for="topping-cebolla">Cebolla</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-pimientos" class="topping-checkbox" value="Pimientos" data-price="1.5">
                            <label for="topping-pimientos">Pimientos</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-aceitunas" class="topping-checkbox" value="Aceitunas" data-price="1.5">
                            <label for="topping-aceitunas">Aceitunas</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-extraqueso" class="topping-checkbox" value="Extra Queso" data-price="1.5">
                            <label for="topping-extraqueso">Extra Queso</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-salchicha" class="topping-checkbox" value="Salchicha" data-price="1.5">
                            <label for="topping-salchicha">Salchicha</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-tocino" class="topping-checkbox" value="Tocino" data-price="1.5">
                            <label for="topping-tocino">Tocino</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-jalapenos" class="topping-checkbox" value="Jalapeños" data-price="1.5">
                            <label for="topping-jalapenos">Jalapeños</label>
                        </div>
                        <div class="topping-item">
                            <input type="checkbox" id="topping-anchoas" class="topping-checkbox" value="Anchoas" data-price="1.5">
                            <label for="topping-anchoas">Anchoas</label>
                        </div>
                    </div>
                </div>
                
                <div style="margin-top: 40px; display: flex; justify-content: space-between;">
                    <button class="btn" id="back-to-selection" style="background-color: #666; padding: 12px 30px;">
                        <i class="fas fa-arrow-left"></i> Volver
                    </button>
                    <button class="btn" id="back-to-home-from-customize" style="background-color: #444; padding: 12px 30px;">
                        <i class="fas fa-home"></i> Inicio
                    </button>
                    <button class="btn" id="continue-to-delivery" style="padding: 12px 30px;">
                        Continuar <i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>
        </section>

        <!-- Delivery Section -->
        <section id="delivery-section" class="order-section">
            <h2 class="section-title">Datos de Entrega</h2>
            
            <div class="order-summary">
                <h3 class="summary-title"><i class="fas fa-receipt"></i> Resumen de tu Pedido</h3>
                <div id="delivery-summary-items">
                    <!-- Aquí se agregarán los items dinámicamente -->
                </div>
                <div class="summary-total">
                    <span>Total:</span>
                    <span id="delivery-summary-total">$0.00</span>
                </div>
            </div>
            
            <div class="delivery-options">
                <h3 style="color: var(--primary); margin-bottom: 20px; font-size: 22px;">Método de Entrega</h3>
                <div class="delivery-methods">
                    <div class="delivery-method">
                        <input type="radio" id="delivery-home" name="delivery-method" class="delivery-radio" value="home" checked>
                        <label for="delivery-home" class="delivery-label">
                            <i class="fas fa-home"></i>
                            <span>Entrega a Domicilio</span>
                        </label>
                    </div>
                    <div class="delivery-method">
                        <input type="radio" id="delivery-pickup" name="delivery-method" class="delivery-radio" value="pickup">
                        <label for="delivery-pickup" class="delivery-label">
                            <i class="fas fa-store"></i>
                            <span>Recoger en Tienda</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <div id="delivery-form">
                <div class="form-group">
                    <label for="delivery-name" class="form-label">Nombre Completo</label>
                    <input type="text" id="delivery-name" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="delivery-phone" class="form-label">Teléfono</label>
                    <input type="tel" id="delivery-phone" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="delivery-address" class="form-label">Dirección</label>
                    <input type="text" id="delivery-address" class="form-control" required>
                </div>
                
                <div class="form-group">
                    <label for="delivery-notes" class="form-label">Instrucciones Especiales</label>
                    <textarea id="delivery-notes" class="form-control" rows="3" placeholder="Ej: Timbre rojo, dejar con el portero, etc."></textarea>
                </div>
            </div>
            
            <div style="margin-top: 40px; display: flex; justify-content: space-between;">
                <button class="btn" id="back-to-customize" style="background-color: #666; padding: 12px 30px;">
                    <i class="fas fa-arrow-left"></i> Volver
                </button>
                <button class="btn" id="back-to-home-from-delivery" style="background-color: #444; padding: 12px 30px;">
                    <i class="fas fa-home"></i> Inicio
                </button>
                <button class="btn" id="continue-to-payment" style="padding: 12px 30px;">
                    Continuar a Pago <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </section>

        <!-- Payment Section -->
        <section id="payment-section" class="order-section">
            <h2 class="section-title">Método de Pago</h2>
            
            <div class="order-summary">
                <h3 class="summary-title"><i class="fas fa-receipt"></i> Resumen de tu Pedido</h3>
                <div id="payment-summary-items">
                    <!-- Aquí se agregarán los items dinámicamente -->
                </div>
                <div class="summary-total">
                    <span>Total:</span>
                    <span id="payment-summary-total">$0.00</span>
                </div>
            </div>
            
            <div class="payment-methods">
                <div class="payment-method">
                    <input type="radio" id="payment-card" name="payment-method" class="payment-radio" value="card" checked>
                    <label for="payment-card" class="payment-label">
                        <i class="far fa-credit-card"></i>
                        <span>Tarjeta de Crédito/Débito</span>
                    </label>
                    <div class="card-form">
                        <div class="form-group">
                            <label for="card-number" class="form-label">Número de Tarjeta</label>
                            <input type="text" id="card-number" class="form-control" placeholder="1234 5678 9012 3456">
                        </div>
                        <div class="form-group">
                            <label for="card-name" class="form-label">Nombre en la Tarjeta</label>
                            <input type="text" id="card-name" class="form-control">
                        </div>
                        <div style="display: flex; gap: 15px;">
                            <div class="form-group" style="flex: 1;">
                                <label for="card-expiry" class="form-label">Fecha de Expiración</label>
                                <input type="text" id="card-expiry" class="form-control" placeholder="MM/AA">
                            </div>
                            <div class="form-group" style="flex: 1;">
                                <label for="card-cvv" class="form-label">CVV</label>
                                <input type="text" id="card-cvv" class="form-control" placeholder="123">
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="payment-method">
                    <input type="radio" id="payment-cash" name="payment-method" class="payment-radio" value="cash">
                    <label for="payment-cash" class="payment-label">
                        <i class="fas fa-money-bill-wave"></i>
                        <span>Efectivo al Recibir</span>
                    </label>
                    <div class="cash-payment">
                        <i class="fas fa-money-bill-alt cash-icon"></i>
                        <p>Paga en efectivo cuando recibas tu pedido. Ten el monto exacto disponible.</p>
                        <div class="cash-amount-group">
                            <label for="cash-amount" class="form-label">Monto con el que pagarás (opcional)</label>
                            <input type="number" id="cash-amount" class="form-control" placeholder="Ej: 500">
                        </div>
                    </div>
                </div>
                
                <div class="payment-method">
                    <input type="radio" id="payment-paypal" name="payment-method" class="payment-radio" value="paypal">
                    <label for="payment-paypal" class="payment-label">
                        <i class="fab fa-paypal"></i>
                        <span>PayPal</span>
                    </label>
                </div>
            </div>
            
            <div style="margin-top: 40px; display: flex; justify-content: space-between;">
                <button class="btn" id="back-to-delivery" style="background-color: #666; padding: 12px 30px;">
                    <i class="fas fa-arrow-left"></i> Volver
                </button>
                <button class="btn" id="back-to-home-from-payment" style="background-color: #444; padding: 12px 30px;">
                    <i class="fas fa-home"></i> Inicio
                </button>
                <button class="btn" id="confirm-order" style="padding: 12px 30px;">
                    Confirmar Pedido <i class="fas fa-check"></i>
                </button>
            </div>
        </section>

        <!-- Confirmation Section -->
        <section id="confirmation-section" class="order-section">
            <div class="confirmation-message">
                <div class="confirmation-icon">
                    <i class="fas fa-check-circle"></i>
                </div>
                <h2 class="confirmation-title">¡Pedido Confirmado!</h2>
                <p class="confirmation-text">
                    Gracias por tu pedido. Hemos recibido tu orden y está siendo preparada. 
                    Recibirás una confirmación por correo electrónico con los detalles de tu pedido.
                </p>
                
                <div class="order-details">
                    <h3 class="order-details-title"><i class="fas fa-info-circle"></i> Detalles del Pedido</h3>
                    <div id="final-order-details">
                        <!-- Aquí se mostrarán los detalles del pedido -->
                    </div>
                    <div id="delivery-time-estimate" style="margin-top: 20px; font-weight: 600; color: var(--primary);">
                        <!-- Tiempo estimado de entrega -->
                    </div>
                </div>
                
                <button class="btn-pdf" id="generate-pdf">
                    <i class="fas fa-file-pdf"></i> Descargar Recibo PDF
                </button>
                
                <div style="margin-top: 40px;">
                    <a href="#" class="btn nav-home" style="display: inline-block; margin-right: 15px;">
                        <i class="fas fa-home"></i> Volver al Inicio
                    </a>
                    <a href="#menu-section" class="btn btn-outline nav-menu" style="display: inline-block;">
                        <i class="fas fa-utensils"></i> Hacer Otro Pedido
                    </a>
                </div>
            </div>
        </section>
    </div>

    <!-- Footer -->
    <footer class="footer" id="footer">
        <div class="container footer-container">
            <div class="footer-column">
                <h3>Sabores del Sol</h3>
                <p style="color: #ccc; margin-bottom: 20px;">Las mejores pizzas entregadas directamente a tu puerta.</p>
                <div class="social-links">
                    <a href="#"><i class="fab fa-facebook-f"></i></a>
                    <a href="#"><i class="fab fa-instagram"></i></a>
                    <a href="#"><i class="fab fa-twitter"></i></a>
                    <a href="#"><i class="fab fa-whatsapp"></i></a>
                </div>
            </div>
            
            <div class="footer-column">
                <h3>Menú</h3>
                <ul class="footer-links">
                    <li><a href="#menu-section">Pizzas Clásicas</a></li>
                    <li><a href="#menu-section">Pizzas Especiales</a></li>
                    <li><a href="#menu-section">Bebidas</a></li>
                    <li><a href="#menu-section">Postres</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Información</h3>
                <ul class="footer-links">
                    <li><a href="#">Sobre Nosotros</a></li>
                    <li><a href="#special-offer">Ofertas Especiales</a></li>
                    <li><a href="#">Términos y Condiciones</a></li>
                    <li><a href="#">Política de Privacidad</a></li>
                </ul>
            </div>
            
            <div class="footer-column">
                <h3>Contacto</h3>
                <ul class="footer-links">
                    <li><i class="fas fa-map-marker-alt" style="margin-right: 10px;"></i> Av. Principal 123, Ciudad</li>
                    <li><i class="fas fa-phone" style="margin-right: 10px;"></i> (123) 456-7890</li>
                    <li><i class="fas fa-envelope" style="margin-right: 10px;"></i> info@saboresdelsol.com</li>
                    <li><i class="fas fa-clock" style="margin-right: 10px;"></i> Abierto de 11am a 11pm</li>
                </ul>
            </div>
        </div>
        
        <div class="copyright">
            &copy; 2023 Sabores del Sol. Todos los derechos reservados.
        </div>
    </footer>

    <!-- Cart Sidebar -->
    <div class="cart-sidebar" id="cart-sidebar">
        <div class="cart-header">
            <h3 class="cart-title">Tu Carrito</h3>
            <button class="cart-close" id="cart-close">&times;</button>
        </div>
        
        <div class="cart-items" id="cart-items">
            <!-- Aquí se agregarán los items del carrito dinámicamente -->
            <div class="cart-empty">
                <div class="cart-empty-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h3 class="cart-empty-title">Tu carrito está vacío</h3>
                <p>Agrega algunos productos deliciosos para comenzar</p>
            </div>
        </div>
        
        <div class="cart-summary" id="cart-summary" style="display: none;">
            <div class="cart-total">
                <span>Total:</span>
                <span id="cart-total-amount">$0.00</span>
            </div>
            <button class="btn-checkout" id="checkout-btn">
                Proceder al Pago <i class="fas fa-arrow-right"></i>
            </button>
        </div>
    </div>

    <!-- Overlay -->
    <div class="overlay" id="overlay"></div>

    <!-- Track Order Button -->
    <div class="track-order-btn" id="track-order-btn">
        <i class="fas fa-map-marker-alt track-order-icon"></i>
    </div>

    <!-- Modal -->
    <div class="modal" id="track-order-modal">
        <div class="modal-content">
            <button class="modal-close" id="modal-close">&times;</button>
            <h3 class="modal-title">Seguimiento de Pedido</h3>
            <div class="loading-container">
                <div class="spinner"></div>
            </div>
            <p style="text-align: center; margin-top: 20px;">Buscando información de tu pedido...</p>
        </div>
    </div>

    <script>
        // Variables globales
        let cart = [];
        let currentStep = 1;
        let orderDetails = {};
        
        // Inicializar la aplicación cuando el DOM esté listo
        document.addEventListener('DOMContentLoaded', function() {
            // Configurar eventos
            setupEventListeners();
            
            // Inicializar el carrito desde localStorage si existe
            loadCartFromStorage();
            
            // Actualizar el contador del carrito
            updateCartCount();
        });
        
        // Configurar todos los event listeners
        function setupEventListeners() {
            // Botones de navegación
            document.getElementById('start-order-btn').addEventListener('click', function(e) {
                e.preventDefault();
                goToStep(1);
            });
            
            // Aplicar oferta especial
            document.getElementById('apply-offer').addEventListener('click', function() {
                applySpecialOffer();
            });
            
            document.getElementById('continue-to-customize').addEventListener('click', function() {
                if (cart.length > 0) {
                    goToStep(2);
                    updateOrderSummary();
                } else {
                    showAlert('Por favor agrega al menos un producto a tu pedido');
                }
            });
            
            document.getElementById('continue-to-delivery').addEventListener('click', function() {
                goToStep(3);
                updateDeliverySummary();
            });
            
            document.getElementById('continue-to-payment').addEventListener('click', function() {
                // Validar datos de entrega
                if (validateDeliveryInfo()) {
                    goToStep(4);
                    updatePaymentSummary();
                }
            });
            
            document.getElementById('confirm-order').addEventListener('click', function() {
                if (validatePaymentInfo()) {
                    processOrder();
                    goToStep(5);
                    updateConfirmationDetails();
                }
            });
            
            // Botones de volver
            document.getElementById('back-to-selection').addEventListener('click', function() {
                goToStep(1);
            });
            
            document.getElementById('back-to-customize').addEventListener('click', function() {
                goToStep(2);
            });
            
            document.getElementById('back-to-delivery').addEventListener('click', function() {
                goToStep(3);
            });
            
            // Botones de regresar al inicio
            document.getElementById('back-to-home-from-customize').addEventListener('click', function() {
                goToStep(1);
                scrollToTop();
            });
            
            document.getElementById('back-to-home-from-delivery').addEventListener('click', function() {
                goToStep(1);
                scrollToTop();
            });
            
            document.getElementById('back-to-home-from-payment').addEventListener('click', function() {
                goToStep(1);
                scrollToTop();
            });
            
            // Carrito
            document.getElementById('cart-icon').addEventListener('click', toggleCart);
            document.getElementById('cart-close').addEventListener('click', toggleCart);
            document.getElementById('overlay').addEventListener('click', toggleCart);
            document.getElementById('checkout-btn').addEventListener('click', function() {
                toggleCart();
                goToStep(2);
                updateOrderSummary();
            });
            
            // Generar PDF
            document.getElementById('generate-pdf').addEventListener('click', generatePDF);
            
            // Seguimiento de pedido
            document.getElementById('track-order-btn').addEventListener('click', showTrackOrderModal);
            document.getElementById('modal-close').addEventListener('click', hideTrackOrderModal);
            
            // Agregar productos al carrito
            const addButtons = document.querySelectorAll('.btn-add');
            addButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const productCard = this.closest('.product-card');
                    addToCart(productCard);
                });
            });
            
            // Navegación del menú principal
            document.querySelectorAll('.nav-home').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    goToStep(1);
                    scrollToTop();
                });
            });
            
            document.querySelectorAll('.nav-menu').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    goToStep(1);
                    document.getElementById('menu-section').scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            document.querySelectorAll('.nav-offers').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('special-offer').scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            document.querySelectorAll('.nav-contact').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.getElementById('footer').scrollIntoView({ behavior: 'smooth' });
                });
            });
            
            // Tabs del menú
            document.querySelectorAll('.menu-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    // Remover active de todos los tabs
                    document.querySelectorAll('.menu-tab').forEach(t => {
                        t.classList.remove('active');
                    });
                    
                    // Remover active de todos los contenidos
                    document.querySelectorAll('.menu-content').forEach(c => {
                        c.classList.remove('active');
                    });
                    
                    // Agregar active al tab clickeado
                    this.classList.add('active');
                    
                    // Mostrar el contenido correspondiente
                    const tabId = this.dataset.tab + '-tab';
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // Actualizar precios cuando cambian las opciones
            const sizeRadios = document.querySelectorAll('.size-radio');
            sizeRadios.forEach(radio => {
                radio.addEventListener('change', updateOrderSummary);
            });
            
            const crustRadios = document.querySelectorAll('.crust-radio');
            crustRadios.forEach(radio => {
                radio.addEventListener('change', updateOrderSummary);
            });
            
            const toppingCheckboxes = document.querySelectorAll('.topping-checkbox');
            toppingCheckboxes.forEach(checkbox => {
                checkbox.addEventListener('change', updateOrderSummary);
            });
            
            // Efecto hover para todos los botones
            document.querySelectorAll('.btn').forEach(button => {
                button.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-2px)';
                    this.style.boxShadow = '0 6px 12px rgba(0, 0, 0, 0.15)';
                });
                
                button.addEventListener('mouseleave', function() {
                    this.style.transform = '';
                    this.style.boxShadow = '';
                });
                
                button.addEventListener('mousedown', function() {
                    this.style.transform = 'translateY(1px)';
                });
                
                button.addEventListener('mouseup', function() {
                    this.style.transform = 'translateY(-2px)';
                });
            });
            
            // Enlaces del footer
            document.querySelectorAll('.footer-links a').forEach(link => {
                link.addEventListener('click', function(e) {
                    if (this.getAttribute('href').startsWith('#')) {
                        e.preventDefault();
                        const target = document.querySelector(this.getAttribute('href'));
                        if (target) {
                            target.scrollIntoView({ behavior: 'smooth' });
                        }
                    }
                });
            });
        }
        
        // Navegación entre pasos
        function goToStep(step) {
            // Ocultar todos los pasos
            document.querySelectorAll('.order-section').forEach(section => {
                section.classList.remove('active');
            });
            
            // Desactivar todos los indicadores de pasos
            document.querySelectorAll('.step').forEach(stepElement => {
                stepElement.classList.remove('active');
            });
            
            // Mostrar el paso actual
            document.getElementById(getSectionId(step)).classList.add('active');
            
            // Activar los indicadores de pasos hasta el actual
            for (let i = 1; i <= step; i++) {
                document.querySelector(`.step[data-step="${i}"]`).classList.add('active');
            }
            
            currentStep = step;
            scrollToTop();
            
            // Actualizar el resumen si es necesario
            if (step === 2) updateOrderSummary();
            if (step === 3) updateDeliverySummary();
            if (step === 4) updatePaymentSummary();
            if (step === 5) updateConfirmationDetails();
        }
        
        function getSectionId(step) {
            switch(step) {
                case 1: return 'menu-section';
                case 2: return 'customize-pizza';
                case 3: return 'delivery-section';
                case 4: return 'payment-section';
                case 5: return 'confirmation-section';
                default: return 'menu-section';
            }
        }
        
        function scrollToTop() {
            window.scrollTo({
                top: 0,
                behavior: 'smooth'
            });
        }
        
        // Funciones del carrito
        function addToCart(productCard) {
            const productId = productCard.dataset.productId;
            const productName = productCard.dataset.productName;
            const productPrice = parseFloat(productCard.dataset.productPrice);
            const productType = productCard.dataset.productType;
            const productImage = productCard.querySelector('.product-image').style.backgroundImage;
            
            // Verificar si el producto ya está en el carrito
            const existingItem = cart.find(item => item.id === productId && !item.customized);
            
            if (existingItem) {
                existingItem.quantity += 1;
            } else {
                cart.push({
                    id: productId,
                    name: productName,
                    price: productPrice,
                    type: productType,
                    image: productImage,
                    quantity: 1,
                    customized: false,
                    size: 'small',
                    crust: 'thin',
                    toppings: []
                });
            }
            
            // Mostrar feedback visual
            showAddToCartFeedback(productCard);
            
            // Actualizar el carrito
            updateCart();
            saveCartToStorage();
        }
        
        function applySpecialOffer() {
            // Agregar dos pizzas medianas y dos bebidas al carrito
            const offerPizzas = [
                {id: '1', name: 'Pepperoni Clásica', price: 12.99, type: 'pizza', image: 'url("https://images.unsplash.com/photo-1588315029754-2dd089d39a1a?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80")', quantity: 1, size: 'medium'},
                {id: '2', name: 'Hawaiana Gold', price: 14.99, type: 'pizza', image: 'url("https://images.unsplash.com/photo-1551504734-5ee1c4a1479b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80")', quantity: 1, size: 'medium'}
            ];
            
            const offerDrinks = [
                {id: 'b1', name: 'Refresco de Cola', price: 2.50, type: 'bebida', image: 'url("https://images.unsplash.com/photo-1554866585-cd94860890b7?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80")', quantity: 1},
                {id: 'b2', name: 'Limonada Natural', price: 3.00, type: 'bebida', image: 'url("https://images.unsplash.com/photo-1559181567-c3190ca9959b?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80")', quantity: 1}
            ];
            
            // Limpiar carrito y agregar oferta
            cart = [...offerPizzas, ...offerDrinks];
            
            // Mostrar notificación
            showAlert('¡Oferta especial aplicada! 2 pizzas medianas + 2 bebidas por $24.99');
            
            // Actualizar carrito
            updateCart();
            saveCartToStorage();
        }
        
        function showAddToCartFeedback(productCard) {
            // Animación de "agregado al carrito"
            productCard.style.transform = 'scale(1.05)';
            productCard.style.boxShadow = '0 10px 25px rgba(0, 0, 0, 0.2)';
            
            setTimeout(() => {
                productCard.style.transform = '';
                productCard.style.boxShadow = '';
            }, 300);
            
            // Mostrar notificación
            const notification = document.createElement('div');
            notification.style.position = 'fixed';
            notification.style.bottom = '20px';
            notification.style.right = '20px';
            notification.style.backgroundColor = 'var(--success)';
            notification.style.color = 'white';
            notification.style.padding = '15px 25px';
            notification.style.borderRadius = '50px';
            notification.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.2)';
            notification.style.zIndex = '1000';
            notification.style.display = 'flex';
            notification.style.alignItems = 'center';
            notification.style.animation = 'fadeIn 0.3s';
            notification.innerHTML = `
                <i class="fas fa-check-circle" style="margin-right: 10px; font-size: 20px;"></i>
                Producto agregado al carrito
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        function updateCart() {
            updateCartCount();
            updateCartItems();
        }
        
        function updateCartCount() {
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.querySelector('.cart-count').textContent = totalItems;
        }
        
        function updateCartItems() {
            const cartItemsContainer = document.getElementById('cart-items');
            const cartSummary = document.getElementById('cart-summary');
            
            if (cart.length === 0) {
                cartItemsContainer.innerHTML = `
                    <div class="cart-empty">
                        <div class="cart-empty-icon">
                            <i class="fas fa-shopping-cart"></i>
                        </div>
                        <h3 class="cart-empty-title">Tu carrito está vacío</h3>
                        <p>Agrega algunos productos deliciosos para comenzar</p>
                    </div>
                `;
                cartSummary.style.display = 'none';
            } else {
                cartItemsContainer.innerHTML = '';
                let total = 0;
                
                cart.forEach((item, index) => {
                    let itemPrice = item.price;
                    
                    // Aplicar costo adicional por tamaño si es pizza
                    if (item.type === 'pizza') {
                        const sizeMap = {
                            'small': 0,
                            'medium': 3,
                            'large': 5,
                            'extra-large': 8
                        };
                        itemPrice += sizeMap[item.size] || 0;
                        
                        // Aplicar costo adicional por masa si es pizza
                        const crustMap = {
                            'thin': 0,
                            'thick': 2,
                            'cheese': 3,
                            'garlic': 2.5
                        };
                        itemPrice += crustMap[item.crust] || 0;
                        
                        // Aplicar costo por ingredientes extra si es pizza
                        const toppingsPrice = item.toppings ? item.toppings.length * 1.5 : 0;
                        itemPrice += toppingsPrice;
                    }
                    
                    // Calcular total del ítem
                    const itemTotal = itemPrice * item.quantity;
                    total += itemTotal;
                    
                    // Agregar al carrito
                    const cartItemElement = document.createElement('div');
                    cartItemElement.className = 'cart-item';
                    cartItemElement.innerHTML = `
                        <div class="cart-item-image" style="background-image: ${item.image}"></div>
                        <div class="cart-item-details">
                            <h4 class="cart-item-name">${item.name} x${item.quantity}</h4>
                            ${item.type === 'pizza' && item.customized ? `<p class="cart-item-options">${formatOptions(item)}</p>` : ''}
                            <div class="cart-item-price">$${itemTotal.toFixed(2)}</div>
                            <div class="quantity-selector">
                                <button class="quantity-btn minus" data-index="${index}">-</button>
                                <input type="number" class="quantity-input" value="${item.quantity}" min="1" data-index="${index}">
                                <button class="quantity-btn plus" data-index="${index}">+</button>
                            </div>
                            <div class="cart-item-remove" data-index="${index}">Eliminar</div>
                        </div>
                    `;
                    
                    cartItemsContainer.appendChild(cartItemElement);
                });
                
                // Actualizar el total
                document.getElementById('cart-total-amount').textContent = `$${total.toFixed(2)}`;
                cartSummary.style.display = 'block';
                
                // Agregar eventos a los nuevos elementos
                document.querySelectorAll('.quantity-btn.minus').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        if (cart[index].quantity > 1) {
                            cart[index].quantity -= 1;
                            updateCart();
                            saveCartToStorage();
                        }
                    });
                });
                
                document.querySelectorAll('.quantity-btn.plus').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        cart[index].quantity += 1;
                        updateCart();
                        saveCartToStorage();
                    });
                });
                
                document.querySelectorAll('.quantity-input').forEach(input => {
                    input.addEventListener('change', function() {
                        const index = parseInt(this.dataset.index);
                        const newQuantity = parseInt(this.value) || 1;
                        cart[index].quantity = newQuantity;
                        updateCart();
                        saveCartToStorage();
                    });
                });
                
                document.querySelectorAll('.cart-item-remove').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const index = parseInt(this.dataset.index);
                        cart.splice(index, 1);
                        updateCart();
                        saveCartToStorage();
                    });
                });
            }
        }
        
        function formatOptions(item) {
            let options = [];
            
            if (item.size) {
                const sizeMap = {
                    'small': 'Pequeña',
                    'medium': 'Mediana',
                    'large': 'Grande',
                    'extra-large': 'Extra Grande'
                };
                options.push(`Tamaño: ${sizeMap[item.size]}`);
            }
            
            if (item.crust) {
                const crustMap = {
                    'thin': 'Delgada',
                    'thick': 'Gruesa',
                    'cheese': 'Queso',
                    'garlic': 'Ajo'
                };
                options.push(`Masa: ${crustMap[item.crust]}`);
            }
            
            if (item.toppings && item.toppings.length > 0) {
                options.push(`Extras: ${item.toppings.join(', ')}`);
            }
            
            return options.join(' | ');
        }
        
        function toggleCart() {
            document.getElementById('cart-sidebar').classList.toggle('active');
            document.getElementById('overlay').classList.toggle('active');
            document.body.style.overflow = document.getElementById('overlay').classList.contains('active') ? 'hidden' : '';
        }
        
        // LocalStorage
        function saveCartToStorage() {
            localStorage.setItem('pizzaCart', JSON.stringify(cart));
        }
        
        function loadCartFromStorage() {
            const savedCart = localStorage.getItem('pizzaCart');
            if (savedCart) {
                cart = JSON.parse(savedCart);
                updateCart();
            }
        }
        
        // Resúmenes de pedido
        function updateOrderSummary() {
            const summaryItemsContainer = document.getElementById('order-summary-items');
            summaryItemsContainer.innerHTML = '';
            
            let subtotal = 0;
            
            cart.forEach((item, index) => {
                // Actualizar las opciones seleccionadas para pizzas no personalizadas
                if (item.type === 'pizza' && !item.customized) {
                    // Tamaño
                    const selectedSize = document.querySelector('input[name="size"]:checked');
                    item.size = selectedSize.value;
                    
                    // Masa
                    const selectedCrust = document.querySelector('input[name="crust"]:checked');
                    item.crust = selectedCrust.value;
                    
                    // Ingredientes extra
                    const selectedToppings = [];
                    document.querySelectorAll('.topping-checkbox:checked').forEach(checkbox => {
                        selectedToppings.push(checkbox.value);
                    });
                    item.toppings = selectedToppings;
                    
                    // Marcar como personalizado
                    item.customized = true;
                }
                
                // Calcular precio del ítem
                let itemPrice = item.price;
                
                // Aplicar costo adicional por tamaño si es pizza
                if (item.type === 'pizza') {
                    const sizePrice = parseFloat(document.querySelector('input[name="size"]:checked').dataset.price) || 0;
                    itemPrice += sizePrice;
                    
                    // Aplicar costo adicional por masa si es pizza
                    const crustPrice = parseFloat(document.querySelector('input[name="crust"]:checked').dataset.price) || 0;
                    itemPrice += crustPrice;
                    
                    // Aplicar costo por ingredientes extra si es pizza
                    const toppingsPrice = item.toppings.length * 1.5;
                    itemPrice += toppingsPrice;
                }
                
                // Calcular total del ítem
                const itemTotal = itemPrice * item.quantity;
                subtotal += itemTotal;
                
                // Agregar al resumen
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item';
                summaryItem.innerHTML = `
                    <span>${item.name} x${item.quantity} ${item.type === 'pizza' ? `(${formatOptions(item)})` : ''}</span>
                    <span>$${itemTotal.toFixed(2)}</span>
                `;
                summaryItemsContainer.appendChild(summaryItem);
            });
            
            // Actualizar total
            document.getElementById('order-summary-total').textContent = `$${subtotal.toFixed(2)}`;
            
            // Guardar cambios en el carrito
            saveCartToStorage();
        }
        
        function updateDeliverySummary() {
            const summaryItemsContainer = document.getElementById('delivery-summary-items');
            summaryItemsContainer.innerHTML = '';
            
            let subtotal = 0;
            
            cart.forEach(item => {
                // Calcular precio del ítem
                let itemPrice = item.price;
                
                // Aplicar costo adicional por tamaño si es pizza
                if (item.type === 'pizza') {
                    const sizeMap = {
                        'small': 0,
                        'medium': 3,
                        'large': 5,
                        'extra-large': 8
                    };
                    itemPrice += sizeMap[item.size] || 0;
                    
                    // Aplicar costo adicional por masa si es pizza
                    const crustMap = {
                        'thin': 0,
                        'thick': 2,
                        'cheese': 3,
                        'garlic': 2.5
                    };
                    itemPrice += crustMap[item.crust] || 0;
                    
                    // Aplicar costo por ingredientes extra si es pizza
                    const toppingsPrice = item.toppings.length * 1.5;
                    itemPrice += toppingsPrice;
                }
                
                // Calcular total del ítem
                const itemTotal = itemPrice * item.quantity;
                subtotal += itemTotal;
                
                // Agregar al resumen
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item';
                summaryItem.innerHTML = `
                    <span>${item.name} x${item.quantity} ${item.type === 'pizza' ? `(${formatOptions(item)})` : ''}</span>
                    <span>$${itemTotal.toFixed(2)}</span>
                `;
                summaryItemsContainer.appendChild(summaryItem);
            });
            
            // Actualizar total
            document.getElementById('delivery-summary-total').textContent = `$${subtotal.toFixed(2)}`;
        }
        
        function updatePaymentSummary() {
            const summaryItemsContainer = document.getElementById('payment-summary-items');
            summaryItemsContainer.innerHTML = '';
            
            let subtotal = 0;
            
            cart.forEach(item => {
                // Calcular precio del ítem
                let itemPrice = item.price;
                
                // Aplicar costo adicional por tamaño si es pizza
                if (item.type === 'pizza') {
                    const sizeMap = {
                        'small': 0,
                        'medium': 3,
                        'large': 5,
                        'extra-large': 8
                    };
                    itemPrice += sizeMap[item.size] || 0;
                    
                    // Aplicar costo adicional por masa si es pizza
                    const crustMap = {
                        'thin': 0,
                        'thick': 2,
                        'cheese': 3,
                        'garlic': 2.5
                    };
                    itemPrice += crustMap[item.crust] || 0;
                    
                    // Aplicar costo por ingredientes extra si es pizza
                    const toppingsPrice = item.toppings.length * 1.5;
                    itemPrice += toppingsPrice;
                }
                
                // Calcular total del ítem
                const itemTotal = itemPrice * item.quantity;
                subtotal += itemTotal;
                
                // Agregar al resumen
                const summaryItem = document.createElement('div');
                summaryItem.className = 'summary-item';
                summaryItem.innerHTML = `
                    <span>${item.name} x${item.quantity}</span>
                    <span>$${itemTotal.toFixed(2)}</span>
                `;
                summaryItemsContainer.appendChild(summaryItem);
            });
            
            // Agregar método de entrega
            const deliveryMethod = document.querySelector('input[name="delivery-method"]:checked').value;
            const deliveryText = deliveryMethod === 'home' ? 'Entrega a domicilio' : 'Recoger en tienda';
            
            const deliveryItem = document.createElement('div');
            deliveryItem.className = 'summary-item';
            deliveryItem.innerHTML = `
                <span>${deliveryText}</span>
                <span>${deliveryMethod === 'home' ? '$2.50' : 'Gratis'}</span>
            `;
            summaryItemsContainer.appendChild(deliveryItem);
            
            // Calcular total con entrega
            const deliveryCost = deliveryMethod === 'home' ? 2.5 : 0;
            const total = subtotal + deliveryCost;
            
            // Actualizar total
            document.getElementById('payment-summary-total').textContent = `$${total.toFixed(2)}`;
        }
        
        // Validación de formularios
        function validateDeliveryInfo() {
            const deliveryMethod = document.querySelector('input[name="delivery-method"]:checked').value;
            
            if (deliveryMethod === 'home') {
                const name = document.getElementById('delivery-name').value.trim();
                const phone = document.getElementById('delivery-phone').value.trim();
                const address = document.getElementById('delivery-address').value.trim();
                
                if (!name) {
                    showAlert('Por favor ingresa tu nombre');
                    return false;
                }
                
                if (!phone) {
                    showAlert('Por favor ingresa tu número de teléfono');
                    return false;
                }
                
                if (!address) {
                    showAlert('Por favor ingresa tu dirección de entrega');
                    return false;
                }
            }
            
            return true;
        }
        
        function validatePaymentInfo() {
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
            
            if (paymentMethod === 'card') {
                const cardNumber = document.getElementById('card-number').value.trim();
                const cardName = document.getElementById('card-name').value.trim();
                const cardExpiry = document.getElementById('card-expiry').value.trim();
                const cardCvv = document.getElementById('card-cvv').value.trim();
                
                if (!cardNumber || cardNumber.replace(/\s/g, '').length !== 16) {
                    showAlert('Por favor ingresa un número de tarjeta válido (16 dígitos)');
                    return false;
                }
                
                if (!cardName) {
                    showAlert('Por favor ingresa el nombre como aparece en la tarjeta');
                    return false;
                }
                
                if (!cardExpiry || !cardExpiry.match(/^\d{2}\/\d{2}$/)) {
                    showAlert('Por favor ingresa una fecha de expiración válida (MM/AA)');
                    return false;
                }
                
                if (!cardCvv || cardCvv.length !== 3) {
                    showAlert('Por favor ingresa un CVV válido (3 dígitos)');
                    return false;
                }
            }
            
            return true;
        }
        
        function showAlert(message) {
            const alert = document.createElement('div');
            alert.style.position = 'fixed';
            alert.style.bottom = '20px';
            alert.style.right = '20px';
            alert.style.backgroundColor = 'var(--primary)';
            alert.style.color = 'white';
            alert.style.padding = '15px 25px';
            alert.style.borderRadius = '50px';
            alert.style.boxShadow = '0 5px 15px rgba(0, 0, 0, 0.2)';
            alert.style.zIndex = '1000';
            alert.style.display = 'flex';
            alert.style.alignItems = 'center';
            alert.style.animation = 'fadeIn 0.3s';
            alert.innerHTML = `
                <i class="fas fa-exclamation-circle" style="margin-right: 10px; font-size: 20px;"></i>
                ${message}
            `;
            
            document.body.appendChild(alert);
            
            setTimeout(() => {
                alert.style.animation = 'fadeOut 0.3s';
                setTimeout(() => {
                    document.body.removeChild(alert);
                }, 300);
            }, 3000);
        }
        
        // Procesar pedido
        function processOrder() {
            // Recopilar información del pedido
            const deliveryMethod = document.querySelector('input[name="delivery-method"]:checked').value;
            const paymentMethod = document.querySelector('input[name="payment-method"]:checked').value;
            
            orderDetails = {
                items: [...cart],
                delivery: {
                    method: deliveryMethod,
                    name: deliveryMethod === 'home' ? document.getElementById('delivery-name').value.trim() : '',
                    phone: deliveryMethod === 'home' ? document.getElementById('delivery-phone').value.trim() : '',
                    address: deliveryMethod === 'home' ? document.getElementById('delivery-address').value.trim() : '',
                    notes: document.getElementById('delivery-notes').value.trim()
                },
                payment: {
                    method: paymentMethod,
                    card: paymentMethod === 'card' ? {
                        number: document.getElementById('card-number').value.trim(),
                        name: document.getElementById('card-name').value.trim(),
                        expiry: document.getElementById('card-expiry').value.trim(),
                        cvv: document.getElementById('card-cvv').value.trim()
                    } : null,
                    cashAmount: paymentMethod === 'cash' ? document.getElementById('cash-amount').value.trim() : null
                },
                orderDate: new Date(),
                orderNumber: generateOrderNumber()
            };
            
            // Calcular total
            let subtotal = 0;
            orderDetails.items.forEach(item => {
                let itemPrice = item.price;
                
                // Aplicar costo adicional por tamaño si es pizza
                if (item.type === 'pizza') {
                    const sizeMap = {
                        'small': 0,
                        'medium': 3,
                        'large': 5,
                        'extra-large': 8
                    };
                    itemPrice += sizeMap[item.size] || 0;
                    
                    // Aplicar costo adicional por masa si es pizza
                    const crustMap = {
                        'thin': 0,
                        'thick': 2,
                        'cheese': 3,
                        'garlic': 2.5
                    };
                    itemPrice += crustMap[item.crust] || 0;
                    
                    // Aplicar costo por ingredientes extra si es pizza
                    const toppingsPrice = item.toppings.length * 1.5;
                    itemPrice += toppingsPrice;
                }
                
                // Calcular total del ítem
                item.totalPrice = itemPrice * item.quantity;
                subtotal += item.totalPrice;
            });
            
            // Agregar costo de entrega
            const deliveryCost = orderDetails.delivery.method === 'home' ? 2.5 : 0;
            orderDetails.subtotal = subtotal;
            orderDetails.deliveryCost = deliveryCost;
            orderDetails.total = subtotal + deliveryCost;
            
            // Limpiar el carrito
            cart = [];
            updateCart();
            saveCartToStorage();
        }
        
        function generateOrderNumber() {
            const now = new Date();
            const year = now.getFullYear().toString().slice(-2);
            const month = (now.getMonth() + 1).toString().padStart(2, '0');
            const day = now.getDate().toString().padStart(2, '0');
            const random = Math.floor(Math.random() * 10000).toString().padStart(4, '0');
            
            return `${year}${month}${day}-${random}`;
        }
        
        function updateConfirmationDetails() {
            const detailsContainer = document.getElementById('final-order-details');
            detailsContainer.innerHTML = '';
            
            // Número de pedido
            const orderNumberItem = document.createElement('div');
            orderNumberItem.className = 'summary-item';
            orderNumberItem.innerHTML = `
                <span>Número de Pedido:</span>
                <span>${orderDetails.orderNumber}</span>
            `;
            detailsContainer.appendChild(orderNumberItem);
            
            // Fecha y hora
            const options = { 
                year: 'numeric', month: 'long', day: 'numeric', 
                hour: '2-digit', minute: '2-digit' 
            };
            const orderDate = orderDetails.orderDate.toLocaleDateString('es-ES', options);
            
            const dateItem = document.createElement('div');
            dateItem.className = 'summary-item';
            dateItem.innerHTML = `
                <span>Fecha y Hora:</span>
                <span>${orderDate}</span>
            `;
            detailsContainer.appendChild(dateItem);
            
            // Método de entrega
            const deliveryMethod = orderDetails.delivery.method === 'home' ? 'Entrega a Domicilio' : 'Recoger en Tienda';
            
            const deliveryItem = document.createElement('div');
            deliveryItem.className = 'summary-item';
            deliveryItem.innerHTML = `
                <span>Método de Entrega:</span>
                <span>${deliveryMethod}</span>
            `;
            detailsContainer.appendChild(deliveryItem);
            
            // Detalles de entrega si es a domicilio
            if (orderDetails.delivery.method === 'home') {
                const addressItem = document.createElement('div');
                addressItem.className = 'summary-item';
                addressItem.innerHTML = `
                    <span>Dirección:</span>
                    <span>${orderDetails.delivery.address}</span>
                `;
                detailsContainer.appendChild(addressItem);
                
                if (orderDetails.delivery.notes) {
                    const notesItem = document.createElement('div');
                    notesItem.className = 'summary-item';
                    notesItem.innerHTML = `
                        <span>Instrucciones:</span>
                        <span>${orderDetails.delivery.notes}</span>
                    `;
                    detailsContainer.appendChild(notesItem);
                }
            }
            
            // Método de pago
            const paymentMethod = orderDetails.payment.method === 'card' ? 'Tarjeta' : 
                                 orderDetails.payment.method === 'paypal' ? 'PayPal' : 'Efectivo';
            
            const paymentItem = document.createElement('div');
            paymentItem.className = 'summary-item';
            paymentItem.innerHTML = `
                <span>Método de Pago:</span>
                <span>${paymentMethod}</span>
            `;
            detailsContainer.appendChild(paymentItem);
            
            // Items del pedido
            orderDetails.items.forEach(item => {
                const itemElement = document.createElement('div');
                itemElement.className = 'summary-item';
                itemElement.innerHTML = `
                    <span>${item.name} x${item.quantity} ${item.type === 'pizza' ? `(${formatOptions(item)})` : ''}</span>
                    <span>$${item.totalPrice.toFixed(2)}</span>
                `;
                detailsContainer.appendChild(itemElement);
            });
            
            // Costo de entrega
            const deliveryCostItem = document.createElement('div');
            deliveryCostItem.className = 'summary-item';
            deliveryCostItem.innerHTML = `
                <span>Costo de Entrega:</span>
                <span>$${orderDetails.deliveryCost.toFixed(2)}</span>
            `;
            detailsContainer.appendChild(deliveryCostItem);
            
            // Total
            const totalItem = document.createElement('div');
            totalItem.className = 'summary-total';
            totalItem.innerHTML = `
                <span>Total:</span>
                <span>$${orderDetails.total.toFixed(2)}</span>
            `;
            detailsContainer.appendChild(totalItem);
            
            // Tiempo estimado de entrega
            const deliveryTime = document.getElementById('delivery-time-estimate');
            const now = new Date();
            const deliveryDate = new Date(now.getTime() + 30 * 60000); // 30 minutos después
            
            const timeOptions = { hour: '2-digit', minute: '2-digit' };
            const deliveryTimeStr = deliveryDate.toLocaleTimeString('es-ES', timeOptions);
            
            deliveryTime.innerHTML = `
                <i class="fas fa-clock" style="margin-right: 10px;"></i>
                Tiempo estimado de entrega: ${deliveryTimeStr}
            `;
        }
        
        // Generar PDF
        function generatePDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Logo y título
            doc.setFontSize(22);
            doc.setTextColor(255, 107, 107);
            doc.text('Sabores del Sol', 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.setTextColor(100, 100, 100);
            doc.text('Recibo de Pedido', 105, 28, { align: 'center' });
            
            // Línea decorativa
            doc.setDrawColor(255, 107, 107);
            doc.setLineWidth(0.5);
            doc.line(20, 32, 190, 32);
            
            // Información del pedido
            doc.setFontSize(10);
            doc.setTextColor(0, 0, 0);
            
            let yPosition = 40;
            
            // Número de pedido
            doc.setFont(undefined, 'bold');
            doc.text('Número de Pedido:', 20, yPosition);
            doc.setFont(undefined, 'normal');
            doc.text(orderDetails.orderNumber, 60, yPosition);
            yPosition += 7;
            
            // Fecha y hora
            const options = { 
                year: 'numeric', month: 'long', day: 'numeric', 
                hour: '2-digit', minute: '2-digit' 
            };
            const orderDate = orderDetails.orderDate.toLocaleDateString('es-ES', options);
            
            doc.setFont(undefined, 'bold');
            doc.text('Fecha y Hora:', 20, yPosition);
            doc.setFont(undefined, 'normal');
            doc.text(orderDate, 60, yPosition);
            yPosition += 7;
            
            // Método de entrega
            const deliveryMethod = orderDetails.delivery.method === 'home' ? 'Entrega a Domicilio' : 'Recoger en Tienda';
            
            doc.setFont(undefined, 'bold');
            doc.text('Método de Entrega:', 20, yPosition);
            doc.setFont(undefined, 'normal');
            doc.text(deliveryMethod, 60, yPosition);
            yPosition += 7;
            
            // Detalles de entrega si es a domicilio
            if (orderDetails.delivery.method === 'home') {
                doc.setFont(undefined, 'bold');
                doc.text('Dirección:', 20, yPosition);
                doc.setFont(undefined, 'normal');
                doc.text(orderDetails.delivery.address, 60, yPosition);
                yPosition += 7;
                
                if (orderDetails.delivery.notes) {
                    doc.setFont(undefined, 'bold');
                    doc.text('Instrucciones:', 20, yPosition);
                    doc.setFont(undefined, 'normal');
                    doc.text(orderDetails.delivery.notes, 60, yPosition);
                    yPosition += 7;
                }
            }
            
            // Método de pago
            const paymentMethod = orderDetails.payment.method === 'card' ? 'Tarjeta' : 
                                 orderDetails.payment.method === 'paypal' ? 'PayPal' : 'Efectivo';
            
            doc.setFont(undefined, 'bold');
            doc.text('Método de Pago:', 20, yPosition);
            doc.setFont(undefined, 'normal');
            doc.text(paymentMethod, 60, yPosition);
            yPosition += 10;
            
            // Tabla de items
            doc.setFont(undefined, 'bold');
            doc.setTextColor(255, 107, 107);
            doc.text('Detalles del Pedido', 20, yPosition);
            yPosition += 7;
            
            // Encabezados de tabla
            doc.setFontSize(9);
            doc.setTextColor(0, 0, 0);
            doc.setFont(undefined, 'bold');
            doc.text('Ítem', 20, yPosition);
            doc.text('Cantidad', 100, yPosition, { align: 'right' });
            doc.text('Precio', 140, yPosition, { align: 'right' });
            doc.text('Total', 180, yPosition, { align: 'right' });
            yPosition += 5;
            
            // Línea debajo de encabezados
            doc.setDrawColor(200, 200, 200);
            doc.line(20, yPosition, 190, yPosition);
            yPosition += 7;
            
            // Items
            doc.setFont(undefined, 'normal');
            doc.setFontSize(8);
            
            orderDetails.items.forEach(item => {
                // Nombre del item con opciones
                const itemName = `${item.name} ${item.type === 'pizza' ? `(${formatOptionsForPDF(item)})` : ''}`;
                
                // Dividir el texto en líneas si es muy largo
                const splitName = doc.splitTextToSize(itemName, 80);
                
                // Calcular altura necesaria
                const itemHeight = splitName.length * 4;
                
                // Verificar si necesitamos una nueva página
                if (yPosition + itemHeight > 250) {
                    doc.addPage();
                    yPosition = 20;
                }
                
                // Nombre del item
                doc.text(splitName, 20, yPosition);
                
                // Cantidad, precio unitario y total
                doc.text(item.quantity.toString(), 100, yPosition, { align: 'right' });
                doc.text(`$${(item.totalPrice / item.quantity).toFixed(2)}`, 140, yPosition, { align: 'right' });
                doc.text(`$${item.totalPrice.toFixed(2)}`, 180, yPosition, { align: 'right' });
                
                yPosition += itemHeight + 3;
                
                // Línea separadora
                doc.setDrawColor(240, 240, 240);
                doc.line(20, yPosition, 190, yPosition);
                yPosition += 5;
            });
            
            // Totales
            yPosition += 5;
            doc.setFontSize(10);
            doc.setFont(undefined, 'bold');
            
            // Subtotal
            doc.text('Subtotal:', 140, yPosition, { align: 'right' });
            doc.text(`$${orderDetails.subtotal.toFixed(2)}`, 180, yPosition, { align: 'right' });
            yPosition += 7;
            
            // Costo de entrega
            doc.text('Costo de Entrega:', 140, yPosition, { align: 'right' });
            doc.text(`$${orderDetails.deliveryCost.toFixed(2)}`, 180, yPosition, { align: 'right' });
            yPosition += 7;
            
            // Total
            doc.setTextColor(255, 107, 107);
            doc.text('TOTAL:', 140, yPosition, { align: 'right' });
            doc.text(`$${orderDetails.total.toFixed(2)}`, 180, yPosition, { align: 'right' });
            
            // Pie de página
            doc.setFontSize(8);
            doc.setTextColor(100, 100, 100);
            doc.text('Gracias por tu pedido en Sabores del Sol', 105, 280, { align: 'center' });
            doc.text('¡Esperamos que disfrutes tu comida!', 105, 285, { align: 'center' });
            
            // Guardar PDF
            doc.save(`pedido_sabores_del_sol_${orderDetails.orderNumber}.pdf`);
        }
        
        function formatOptionsForPDF(item) {
            let options = [];
            
            if (item.size) {
                const sizeMap = {
                    'small': 'Pequeña',
                    'medium': 'Mediana',
                    'large': 'Grande',
                    'extra-large': 'Extra Grande'
                };
                options.push(sizeMap[item.size]);
            }
            
            if (item.crust) {
                const crustMap = {
                    'thin': 'Delgada',
                    'thick': 'Gruesa',
                    'cheese': 'Queso',
                    'garlic': 'Ajo'
                };
                options.push(crustMap[item.crust]);
            }
            
            if (item.toppings && item.toppings.length > 0) {
                options.push(`Extras: ${item.toppings.join(', ')}`);
            }
            
            return options.join(' - ');
        }
        
        // Seguimiento de pedido
        function showTrackOrderModal() {
            document.getElementById('track-order-modal').style.display = 'flex';
            document.getElementById('overlay').classList.add('active');
            document.body.style.overflow = 'hidden';
            
            // Simular carga de datos
            setTimeout(() => {
                const modalContent = document.querySelector('#track-order-modal .modal-content');
                modalContent.innerHTML = `
                    <button class="modal-close" id="modal-close">&times;</button>
                    <h3 class="modal-title">Seguimiento de Pedido</h3>
                    
                    <div style="margin: 20px 0; text-align: center;">
                        <div style="font-size: 18px; font-weight: bold; margin-bottom: 10px; color: var(--primary);">
                            Pedido #${orderDetails.orderNumber || 'XXXXXX'}
                        </div>
                        <div style="margin-bottom: 20px;">
                            ${orderDetails.orderDate ? orderDetails.orderDate.toLocaleString('es-ES') : 'Fecha no disponible'}
                        </div>
                    </div>
                    
                    <div style="position: relative; margin: 30px 0; padding-left: 30px;">
                        <!-- Paso 1: Pedido recibido -->
                        <div style="position: relative; margin-bottom: 40px;">
                            <div style="position: absolute; left: -15px; top: 0; width: 30px; height: 30px; background-color: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-check"></i>
                            </div>
                            <div style="font-weight: bold; margin-bottom: 5px;">Pedido Recibido</div>
                            <div style="color: #666; font-size: 14px;">Hemos recibido tu pedido y está siendo procesado.</div>
                        </div>
                        
                        <!-- Paso 2: En preparación -->
                        <div style="position: relative; margin-bottom: 40px;">
                            <div style="position: absolute; left: -15px; top: 0; width: 30px; height: 30px; background-color: var(--success); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-check"></i>
                            </div>
                            <div style="font-weight: bold; margin-bottom: 5px;">En Preparación</div>
                            <div style="color: #666; font-size: 14px;">Nuestros chefs están preparando tu deliciosa pizza.</div>
                        </div>
                        
                        <!-- Paso 3: En camino -->
                        <div style="position: relative; margin-bottom: 40px;">
                            <div style="position: absolute; left: -15px; top: 0; width: 30px; height: 30px; background-color: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white;">
                                <i class="fas fa-motorcycle"></i>
                            </div>
                            <div style="font-weight: bold; margin-bottom: 5px;">En Camino</div>
                            <div style="color: #666; font-size: 14px;">Tu pedido está en camino. ¡Prepárate para disfrutarlo!</div>
                            <div style="margin-top: 10px; font-size: 14px;">
                                <i class="fas fa-clock" style="margin-right: 5px;"></i>
                                Tiempo estimado de llegada: 15-20 minutos
                            </div>
                        </div>
                        
                        <!-- Paso 4: Entregado -->
                        <div style="position: relative;">
                            <div style="position: absolute; left: -15px; top: 0; width: 30px; height: 30px; background-color: #e0e0e0; border-radius: 50%; display: flex; align-items: center; justify-content: center; color: #999;">
                                <i class="fas fa-home"></i>
                            </div>
                            <div style="font-weight: bold; margin-bottom: 5px; color: #999;">Entregado</div>
                            <div style="color: #999; font-size: 14px;">Tu pedido será marcado como entregado cuando lo recibas.</div>
                        </div>
                        
                        <!-- Línea de progreso -->
                        <div style="position: absolute; left: 0; top: 0; width: 2px; height: 80%; background-color: var(--primary); z-index: -1; margin-left: -1px;"></div>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <button class="btn" style="padding: 10px 20px; font-size: 14px;" id="close-track-modal">
                            Cerrar
                        </button>
                    </div>
                `;
                
                document.getElementById('close-track-modal').addEventListener('click', hideTrackOrderModal);
                document.getElementById('modal-close').addEventListener('click', hideTrackOrderModal);
            }, 1500);
        }
        
        function hideTrackOrderModal() {
            document.getElementById('track-order-modal').style.display = 'none';
            document.getElementById('overlay').classList.remove('active');
            document.body.style.overflow = '';
        }
    </script>
</body>
</html>
